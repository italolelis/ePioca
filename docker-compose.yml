---
version: '3'
services:

    service:
        build: service/
        environment: 
            PORT: 8080
            LOG_LEVEL: "debug"
        ports:
            - "8115:8080"
        volumes:
            - ./service:/go/src/github.com/italolelis/epioca/service
        command: "CompileDaemon -build='go install ./cmd/epioca' -command=epioca"


    web:
        build: web/
        ports:
            - "8116:8080"
        volumes:
            - ./web:/server/http
    postgres:
        image: postgres:9.6
        ports:
            - '8117:5432'
        environment:
            LC_ALL: C.UTF-8
            POSTGRES_USER: myuser
            POSTGRES_PASSWORD: mypass
            POSTGRES_DB: epioca
